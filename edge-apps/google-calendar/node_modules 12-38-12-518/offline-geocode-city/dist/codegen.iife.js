(()=>{var R=Object.create;var f=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var s=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(t,a)=>(typeof require<"u"?require:t)[a]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+o+'" is not supported')});var M=(o,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of _(t))!F.call(o,e)&&e!==a&&f(o,e,{get:()=>t[e],enumerable:!(n=S(t,e))||n.enumerable});return o};var y=(o,t,a)=>(a=o!=null?R(E(o)):{},M(t||!o||!o.__esModule?f(a,"default",{value:o,enumerable:!0}):a,o));var i=s("fs"),p=s("path"),D=s("csv-parse"),g=y(s("lz-ts"),1),I=y(s("s2-geometry"),1),B=s("url"),b=s("path"),U={},{compressToURI:h}=g.default,{S2:k}=I.default,$=(0,B.fileURLToPath)(U.url),u=(0,b.dirname)($),c=(0,D.parse)({delimiter:",",quote:'"'}),P=o=>{let t={};return o.forEach((a,n)=>{t[a[0]]={code:a[0],name:a[1],index:n}}),t},v=async(o,t,a=15e3)=>new Promise(n=>{let e=[];c.on("readable",function(){let r;for(;(r=c.read())!==null;){let[m,,A,L,,w,,,T,x]=r,l=parseFloat(A),d=parseFloat(L);(parseInt(x)>=a||T)&&l&&d&&e.push([k.latLngToKey(l,d,8),m,o[w].index])}}),c.on("end",async()=>{e.sort((r,m)=>r[2]-m[2]),n(e)}),c.write(t),c.end()}),N=o=>{let t="",a=null;return o.forEach((n,e)=>{let r=o[e+1];t+=`${n[0]}${n[1]}
`,r&&r[2]&&(a===null||r&&r[2]!==a)&&(t+=`${r[2]}
`,a=r[2])}),t},C=o=>h(N(o));(async()=>{let o=JSON.parse((0,i.readFileSync)((0,p.resolve)(u,"../data/countriesIso2.json"),{encoding:"utf8"})).map(a=>[a.code,a.name]);(0,i.writeFileSync)((0,p.resolve)(u,"../src/gen/baseDataCountries.ts"),`
    export const BASE_DATA_COUNTRIES = \`${C(o)}\`;
    `);let t=await v(P(o),(0,i.readFileSync)((0,p.resolve)(u,"../data/worldcities.csv"),{encoding:"utf8"}));(0,i.writeFileSync)((0,p.resolve)(u,"../src/gen/baseDataCities.ts"),`
    export const BASE_DATA_CITIES = \`${C(t)}\`;
    `)})();})();
//# sourceMappingURL=codegen.iife.js.map
